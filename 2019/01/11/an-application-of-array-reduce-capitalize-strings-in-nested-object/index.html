<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-cn,en,default">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">













<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.4.2" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.2">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.2" color="#222">








<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.2',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="It has been a few days since my last post. I was quite busy with development the company’s ERP platform. Finally, today I have some time to share one interesting case that I encountered in the process">
<meta name="keywords" content="javascript,typescript,reduce,algorithm,nested object,capitalize">
<meta property="og:type" content="article">
<meta property="og:title" content="An application of Array.Reduce() - Capitalize Strings in Nested-object">
<meta property="og:url" content="https://yizhiyue.me/2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/index.html">
<meta property="og:site_name" content="Zhiyue · 纸岳">
<meta property="og:description" content="It has been a few days since my last post. I was quite busy with development the company’s ERP platform. Finally, today I have some time to share one interesting case that I encountered in the process">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-07-18T16:29:33.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="An application of Array.Reduce() - Capitalize Strings in Nested-object">
<meta name="twitter:description" content="It has been a few days since my last post. I was quite busy with development the company’s ERP platform. Finally, today I have some time to share one interesting case that I encountered in the process">






  <link rel="canonical" href="https://yizhiyue.me/2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>An application of Array.Reduce() - Capitalize Strings in Nested-object | Zhiyue · 纸岳</title>
  




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-128207335-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-128207335-1');
</script>






  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-cn">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Zhiyue · 纸岳</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-grades">
    <a href="/2019/05/28/GPA-calculator-with-my-real-academic-grades-using-react/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-study"></i> <br>Grades</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://yizhiyue.me/2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhiyue Yi">
      <meta itemprop="description" content="简博记事 · 山不在高，有仙则灵">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zhiyue · 纸岳">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">An application of Array.Reduce() - Capitalize Strings in Nested-object
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-01-11 18:30:20" itemprop="dateCreated datePublished" datetime="2019-01-11T18:30:20+08:00">2019-01-11</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Algorithm/" itemprop="url" rel="index"><span itemprop="name">Algorithm</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/" class="leancloud_visitors" data-flag-title="An application of Array.Reduce() - Capitalize Strings in Nested-object">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Views: </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>It has been a few days since my last post. I was quite busy with development the company’s ERP platform. Finally, today I have some time to share one interesting case that I encountered in the process of developing our company’s job application portal.</p>
<h1 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h1><p>The portal has a main component which is the job application form. It requires the users to fill in all kinds of fields including personal information, education records and past working experiences. After completing the form development, our beloved PM requested another feature, when submitting the form, transform some specified fields to uppercase texts and then pass to the backend.</p>
<p>Now the problem is very cleared. I have a complex object which stores the whole application information, which is something like the code showed below, containing nested attributes.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> application = &#123;</span><br><span class="line">  countryApplied: <span class="string">"Singapore"</span>,</span><br><span class="line">  personalInfo: &#123;</span><br><span class="line">    name: <span class="string">"Peter"</span>,</span><br><span class="line">    age: <span class="number">24</span>,</span><br><span class="line">    email: <span class="string">"peter@tmail.com"</span>,</span><br><span class="line">    emergencyContacts: &#123;</span><br><span class="line">      name: <span class="string">"Ronald"</span>,</span><br><span class="line">      age: <span class="number">49</span>,</span><br><span class="line">      relationship: <span class="string">"father"</span>,</span><br><span class="line">      email: <span class="string">"ronald@gotmail.com"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>The PM would like to make the country applied, the applicant’s name, ermergency contact’s name, relationship to be capitalized. (The real application object contains many more attributes. Here is a shorter version illustration)</p>
<p>In the end, the object should become as below.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> application = &#123;</span><br><span class="line">  countryApplied: <span class="string">"SINGAPORE"</span>,</span><br><span class="line">  personalInfo: &#123;</span><br><span class="line">    name: <span class="string">"PETER"</span>,</span><br><span class="line">    age: <span class="number">24</span>,</span><br><span class="line">    email: <span class="string">"peter@tmail.com"</span>,</span><br><span class="line">    emergencyContacts: &#123;</span><br><span class="line">      name: <span class="string">"RONALD"</span>,</span><br><span class="line">      age: <span class="number">49</span>,</span><br><span class="line">      relationship: <span class="string">"FATHER"</span>,</span><br><span class="line">      email: <span class="string">"ronald@gotmail.com"</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h1><p>To automate the process, I hope to use an array to list all the fields which I need to capitalize, using a string to represent the deeply nested key, separated by comma.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> requiredFields = [</span><br><span class="line">  <span class="string">"countryApplied"</span>,</span><br><span class="line">  <span class="string">"personalInfo.name"</span>,</span><br><span class="line">  <span class="string">"personalInfo.emergencyContacts.name"</span>,</span><br><span class="line">  <span class="string">"personalInfo.emergencyContacts.relationship"</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>Apparently, the string <code>&#39;personalInfo.emergencyContacts.relationship&#39;</code> cannot be directly used on <code>application</code>. We may need to use <code>Array.split()</code> to get an array of nested keys and then use <code>Array.reduce()</code> to traverse every level of keys in the object.</p>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><h2 id="Step-1-Define-the-Function-Structure"><a href="#Step-1-Define-the-Function-Structure" class="headerlink" title="Step 1: Define the Function Structure"></a>Step 1: Define the Function Structure</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Deep toUpperCase in an object</span></span><br><span class="line"><span class="comment"> * @param &#123;any&#125; obj the target object to conduct toUpper in object</span></span><br><span class="line"><span class="comment"> * @param &#123;string[]&#125; fieldsList array of field names in string. Deep properties can be expressed as 'xxx.yy.zzzz'</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> toUpperInObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj, fieldsList</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Implementation</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="Step-2-Iterate-the-Field-List-and-Get-Their-Nested-Key-Split"><a href="#Step-2-Iterate-the-Field-List-and-Get-Their-Nested-Key-Split" class="headerlink" title="Step 2: Iterate the Field List and Get Their Nested Key Split"></a>Step 2: Iterate the Field List and Get Their Nested Key Split</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fieldsList.forEach(<span class="function"><span class="params">f</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> propertyParts = f.split(<span class="string">"."</span>);</span><br><span class="line">  <span class="comment">// The remaining implementation</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>If f is <code>&#39;personalInfo.emergencyContacts.relationship&#39;</code>, then propertyParts is <code>[&#39;personalInfo&#39;, &#39;emergencyContacts&#39;, &#39;relationship&#39;]</code></p>
<h2 id="Step-3-Iterate-the-Object-Keys-to-Find-the-Target"><a href="#Step-3-Iterate-the-Object-Keys-to-Find-the-Target" class="headerlink" title="Step 3: Iterate the Object Keys to Find the Target"></a>Step 3: Iterate the Object Keys to Find the Target</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">propertyParts.reduce(<span class="function">(<span class="params">xs, x</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (xs &amp;&amp; xs[x]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> xs[x] === <span class="string">"string"</span>) &#123;</span><br><span class="line">      xs[x] = xs[x].toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> xs[x];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, obj);</span><br></pre></td></tr></table></figure>
<p>Make use of <code>Array.reduce()</code> function as the accumulated parameter can record the current object level, so that the target value can be accessed level by level.</p>
<p>For example, <code>[&#39;personalInfo&#39;, &#39;emergencyContacts&#39;, &#39;relationship&#39;]</code> will be operated as following code shows.</p>
<ul>
<li>1st iteration</li>
</ul>
<p><code>x</code> is <code>&#39;personalInfo&#39;</code></p>
<p><code>xs</code> is</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    countryApplied: <span class="string">'Singapore'</span>,</span><br><span class="line">    personalInfo: &#123;</span><br><span class="line">        name: <span class="string">'Peter'</span>,</span><br><span class="line">        age: <span class="number">24</span>,</span><br><span class="line">        email: <span class="string">'peter@tmail.com'</span>,</span><br><span class="line">        emergencyContacts: &#123;</span><br><span class="line">            name: <span class="string">'Ronald'</span>,</span><br><span class="line">            age: <span class="number">49</span>,</span><br><span class="line">            relationship: <span class="string">'father'</span>,</span><br><span class="line">            email: <span class="string">'ronald@gotmail.com'</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>xs[x]</code> is</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name: <span class="string">'Peter'</span>,</span><br><span class="line">    age: <span class="number">24</span>,</span><br><span class="line">    email: <span class="string">'peter@tmail.com'</span>,</span><br><span class="line">    emergencyContacts: &#123;</span><br><span class="line">        name: <span class="string">'Ronald'</span>,</span><br><span class="line">        age: <span class="number">49</span>,</span><br><span class="line">        relationship: <span class="string">'father'</span>,</span><br><span class="line">        email: <span class="string">'ronald@gotmail.com'</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>2nd iteration</li>
</ul>
<p><code>x</code> is <code>&#39;emergencyContacts&#39;</code></p>
<p><code>xs</code> is</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    name: <span class="string">'Peter'</span>,</span><br><span class="line">    age: <span class="number">24</span>,</span><br><span class="line">    email: <span class="string">'peter@tmail.com'</span>,</span><br><span class="line">    emergencyContacts: &#123;</span><br><span class="line">        name: <span class="string">'Ronald'</span>,</span><br><span class="line">        age: <span class="number">49</span>,</span><br><span class="line">        relationship: <span class="string">'father'</span>,</span><br><span class="line">        email: <span class="string">'ronald@gotmail.com'</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>xs[x]</code> is</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">emergencyContacts: &#123;</span><br><span class="line">    name: <span class="string">'Ronald'</span>,</span><br><span class="line">    age: <span class="number">49</span>,</span><br><span class="line">    relationship: <span class="string">'father'</span>,</span><br><span class="line">    email: <span class="string">'ronald@gotmail.com'</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<ul>
<li>3rd iteration</li>
</ul>
<p><code>x</code> is <code>&#39;relationship&#39;</code></p>
<p><code>xs</code> is</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">emergencyContacts: &#123;</span><br><span class="line">    name: <span class="string">'Ronald'</span>,</span><br><span class="line">    age: <span class="number">49</span>,</span><br><span class="line">    relationship: <span class="string">'father'</span>,</span><br><span class="line">    email: <span class="string">'ronald@gotmail.com'</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><code>xs[x]</code> is <code>&#39;father&#39;</code></p>
<p>Now, we successfully located <code>application.personalInfo.emergencyContacts.relationship</code>, which is valued as <code>&#39;father&#39;</code>. And then we make it uppercase using <code>String.toUpperCase()</code></p>
<p>Using the same logic, every listed attribute will be accessed and necessary actions can be taken to the correct target.</p>
<h1 id="Complete-Code"><a href="#Complete-Code" class="headerlink" title="Complete Code"></a>Complete Code</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Deep toUpperCase in an object</span></span><br><span class="line"><span class="comment"> * @param &#123;any&#125; obj the target object to conduct toUpper in object</span></span><br><span class="line"><span class="comment"> * @param &#123;string[]&#125; fieldsList array of field names in string. Deep properties can be expressed as 'xxx.yy.zzzz'</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> toUpperInObject = <span class="function"><span class="keyword">function</span>(<span class="params">obj, fieldsList</span>) </span>&#123;</span><br><span class="line">  fieldsList.forEach(<span class="function"><span class="params">f</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> propertyParts = f.split(<span class="string">"."</span>);</span><br><span class="line">    propertyParts.reduce(<span class="function">(<span class="params">xs, x</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (xs &amp;&amp; xs[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> xs[x] === <span class="string">"string"</span>) &#123;</span><br><span class="line">          xs[x] = xs[x].toUpperCase();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> xs[x];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, obj);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Another simple example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    b: <span class="string">"test"</span>,</span><br><span class="line">    c: &#123;</span><br><span class="line">      d: <span class="string">"test"</span>,</span><br><span class="line">      e: <span class="number">123</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  f: <span class="string">"test"</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> fieldsList = [<span class="string">"a.b"</span>, <span class="string">"a.c.d"</span>];</span><br><span class="line">toUpperInObject(obj, fieldsList);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>
<p>And then <code>obj</code> becomes</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    a: &#123;</span><br><span class="line">        b: <span class="string">'TEST'</span>,</span><br><span class="line">        c: &#123;</span><br><span class="line">            d: <span class="string">'TEST'</span>,</span><br><span class="line">            e: <span class="number">123</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    f: <span class="string">'test'</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JS/" rel="tag"># JS</a>
          
            <a href="/tags/Algorithm/" rel="tag"># Algorithm</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/12/30/2018-upstreaming-all-the-time/" rel="next" title="2018，逆流而上">
                <i class="fa fa-chevron-left"></i> 2018，逆流而上
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/15/understanding-loops-in-recursive-functions/" rel="prev" title="Understanding Loops in Recursive Functions">
                Understanding Loops in Recursive Functions <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Zhiyue Yi">
            
              <p class="site-author-name" itemprop="name">Zhiyue Yi</p>
              <p class="site-description motion-element" itemprop="description">简博记事 · 山不在高，有仙则灵</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">39</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">26</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/ZhiyueYi" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:lane0223@hotmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.linkedin.com/in/zhiyue/" target="_blank" title="LinkedIn"><i class="fa fa-fw fa-linkedin"></i>LinkedIn</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Following
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.ruanyifeng.com/blog/" title="阮一峰的网络日志" target="_blank">阮一峰的网络日志</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://github.com/berwin/Blog" title="Berwin" target="_blank">Berwin</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.phodal.com/" title="Phodal" target="_blank">Phodal</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://lihautan.com/" title="Tan Li Hau" target="_blank">Tan Li Hau</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Problem"><span class="nav-number">1.</span> <span class="nav-text">Problem</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Analysis"><span class="nav-number">2.</span> <span class="nav-text">Analysis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Solution"><span class="nav-number">3.</span> <span class="nav-text">Solution</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Step-1-Define-the-Function-Structure"><span class="nav-number">3.1.</span> <span class="nav-text">Step 1: Define the Function Structure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Step-2-Iterate-the-Field-List-and-Get-Their-Nested-Key-Split"><span class="nav-number">3.2.</span> <span class="nav-text">Step 2: Iterate the Field List and Get Their Nested Key Split</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Step-3-Iterate-the-Object-Keys-to-Find-the-Target"><span class="nav-number">3.3.</span> <span class="nav-text">Step 3: Iterate the Object Keys to Find the Target</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Complete-Code"><span class="nav-number">4.</span> <span class="nav-text">Complete Code</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhiyue Yi</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  
  <!-- custom analytics part create by xiamo -->
<script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
<script>AV.initialize("mEGi5sBFEP371zIo2Xx7C3E2-gzGzoHsz", "bdUvz3GBvqIqUVKnu9Idzixo");</script>
<script>
function showTime(Counter) {
	var query = new AV.Query(Counter);
	$(".leancloud_visitors").each(function() {
		var url = $(this).attr("id").trim();
		query.equalTo("url", url);
		query.find({
			success: function(results) {
				if (results.length == 0) {
					var content = '0 ' + $(document.getElementById(url)).text();
					$(document.getElementById(url)).text(content);
					return;
				}
				for (var i = 0; i < results.length; i++) {
					var object = results[i];
					var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
					$(document.getElementById(url)).text(content);
				}
			},
			error: function(object, error) {
				console.log("Error: " + error.code + " " + error.message);
			}
		});

	});
}

function addCount(Counter) {
	var Counter = AV.Object.extend("Counter");
	url = $(".leancloud_visitors").attr('id').trim();
	title = $(".leancloud_visitors").attr('data-flag-title').trim();
	var query = new AV.Query(Counter);
	query.equalTo("url", url);
	query.find({
		success: function(results) {
			if (results.length > 0) {
				var counter = results[0];
				counter.fetchWhenSave(true);
				counter.increment("time");
				counter.save(null, {
					success: function(counter) {
						var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					},
					error: function(counter, error) {
						console.log('Failed to save Visitor num, with error message: ' + error.message);
					}
				});
			} else {
				var newcounter = new Counter();
				newcounter.set("title", title);
				newcounter.set("url", url);
				newcounter.set("time", 1);
				newcounter.save(null, {
					success: function(newcounter) {
					    console.log("newcounter.get('time')="+newcounter.get('time'));
						var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
						$(document.getElementById(url)).text(content);
					},
					error: function(newcounter, error) {
						console.log('Failed to create');
					}
				});
			}
		},
		error: function(error) {
			console.log('Error:' + error.code + " " + error.message);
		}
	});
}
$(function() {
	var Counter = AV.Object.extend("Counter");
	if ($('.leancloud_visitors').length == 1) {
		addCount(Counter);
	} else if ($('.post-title-link').length > 1) {
		showTime(Counter);
	}
}); 
</script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
  

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.2"></script>



  

  
    <script id="dsq-count-scr" src="https://yizhiyue.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://yizhiyue.me/2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/';
        this.page.identifier = '2019/01/11/an-application-of-array-reduce-capitalize-strings-in-nested-object/';
        this.page.title = 'An application of Array.Reduce() - Capitalize Strings in Nested-object';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://yizhiyue.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  












  





  

  
  <script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(counter.time + 1);
            })
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              Counter('post', '/classes/Counter', JSON.stringify({ title: title, url: url, time: 1}))
                .done(function () {
                  var $element = $(document.getElementById(url));
                  $element.find('.leancloud-visitors-count').text(1);
                })
                .fail(function () {
                  console.log('Failed to create');
                });
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "mEGi5sBFEP371zIo2Xx7C3E2-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "mEGi5sBFEP371zIo2Xx7C3E2-gzGzoHsz",
                'X-LC-Key': "bdUvz3GBvqIqUVKnu9Idzixo",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script>



  

  

  
  

  
  

  


  
  

  

  

  

  

  

</body>
</html>
